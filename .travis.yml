sudo: required

addons:
  chrome: stable

language: php
dist: trusty

php:
- 7.1.9

services:
- mysql

before_script:
- cd soen341-UB3-QA
- mysql -e 'create database projectub3'
- composer install --no-interaction
- composer self-update
- php artisan migrate
- php artisan key:generate
- export DISPLAY=:99.0
- sh -e /etc/init.d/xvfb start
- ./vendor/laravel/dusk/bin/chromedriver-linux &
- php artisan serve &

script:
- vendor/bin/phpunit
- php artisan dusk
